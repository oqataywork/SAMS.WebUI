@using SAMS.Core.ViewModels

@{
    Layout = null;
}
<link href="@Url.Content("~/Content/SamsStyles.css")" rel="stylesheet" type="text/css" />
<script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>
<script src="~/Static/v1/js/jquery.validate.min.js"></script>

<link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
<script src="~/Static/v1/Vendors/d3_mitch_tree/dist/js/d3-mitch-tree.min.js"></script>
<link href="@Url.Content("~/Static/v1/Vendors/d3_mitch_tree/dist/css/d3-mitch-tree.min.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Static/v1/Vendors/d3_mitch_tree/dist/css/d3-mitch-tree-theme-default.min.css")" rel="stylesheet" type="text/css" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">


<script src="~/Static/v1/js/sweetalert2.min.js"></script>

<script type="text/javascript">


    function onVagonClassesframeLoad() {
        //alert('myframe is loaded');
        var element = $("#VagonClasses");
        kendo.ui.progress(element, false);
    };

    //function onVagonSeryClassesframeLoad() {
    //    //alert('myframe is loaded');
    //    var element = $("#VagonSeryClasses");
    //    kendo.ui.progress(element, false);
    //};

    $(document).ready(function () {
        @*var vafclurl = "@ViewData["VagonClassesUrl"].ToString()";
        $('#VagonClassesframe').attr('src', vafclurl);


        //$.ajax(vafclurl).then(function(html){
        //    /* var src = 'data:text/html;charset=utf-8,' + encodeURIComponent(html);*/
        //    var src = encodeURIComponent(html);
        //    //$('<iframe src="' + src + '"/>').appendTo(document.body);
        //    $('#VagonClassesframe').attr('src', src);
        //});*@
        debugger;

        var element = $("#VagonClasses");
        kendo.ui.progress(element, true);

        //var element2 = $("#VagonSeryClasses");
        //kendo.ui.progress(element2, true);
    });


</script>


<div id="VagonClasses" style="width: 100%">
    @*<iframe id="VagonClassesframe" width="100%" height="440px"></iframe>*@
    <iframe id="VagonClassesframe" src="@ViewData["VagonClassesUrl"].ToString()" width="100%" height="330px" onload="onVagonClassesframeLoad(this)"></iframe>
    @*<iframe src="~/Pivot/Reports/Current?userGuid=@Model.UserGuid.ToString()" width="100%" height="800px"></iframe>*@
    @*<iframe src="http://localhost:57566/VagonClasses/index" width="800px" height="400px"></iframe>*@
</div>
<div id="VagonSeryClasses" style="width: 100%">
    <iframe src="@ViewData["VagonSeryClassesUrl"].ToString()" width="100%" height="330px" ></iframe>
</div>
<div id="VagonTypes" style="width: 100%">
    <iframe src="@ViewData["VagonTypeClassesUrl"].ToString()" width="100%" height="330px"></iframe>
</div>
<div id="VagonModels" style="width: 100%">
    <iframe src="@ViewData["VagonModelClassesUrl"].ToString()" width="100%" height="330px"></iframe>
</div>



<script>
    var _VagonTypesIsExpanded = false;

    function VagonTypesIsExpanded() {
        return _VagonTypesIsExpanded;
    }

    function onVagonTypesExpand() {
        //_VagonTypesIsExpanded = true;
        //var grid = $("#AssetCategoryDefectMapgrid").getKendoGrid();
        //if (grid)
        //    grid.dataSource.read();
    };

    function onVagonTypesCollapse() {
        _VagonTypesIsExpanded = false;
    };

    function onVagonTypesComplete() {

    };



    var _VagonModelsIsExpanded = false;

    function VagonModelsIsExpanded() {
        return _VagonModelsIsExpanded;
    }

    function onVagonModelsExpand() {
        //_VagonModelsIsExpanded = true;
        //var grid = $("#AssetCategoryDefectMapgrid").getKendoGrid();
        //if (grid)
        //    grid.dataSource.read();
    };

    function onVagonModelsCollapse() {
        _VagonModelsIsExpanded = false;
    };

    function onVagonModelsComplete() {

    };

    var _VagonClassesIsExpanded = false;

    function VagonClassesIsExpanded() {
        return _VagonClassesIsExpanded;
    }

    function onVagonClassesExpand() {
        //_VagonClassesIsExpanded = true;
        //var grid = $("#AssetCategoryDefectMapgrid").getKendoGrid();
        //if (grid)
        //    grid.dataSource.read();
    };

    function onVagonClassesCollapse() {
        _VagonClassesIsExpanded = false;
    };

    function onVagonClassesComplete() {

    };


    var _VagonSeryClassesIsExpanded = false;

    function VagonSeryClassesIsExpanded() {
        return _VagonSeryClassesIsExpanded;
    }

    function onVagonSeryClassesExpand() {
        //_VagonSeryClassesIsExpanded = true;
        //var grid = $("#AssetCategoryDefectMapgrid").getKendoGrid();
        //if (grid)
        //    grid.dataSource.read();
    };

    function onVagonSeryClassesCollapse() {
        _VagonSeryClassesIsExpanded = false;
    };

    function onVagonSeryClassesComplete() {

    };


    $('#VagonClasses').kendoExpansionPanel({
        title: 'Вагоны',
        expanded: false,
        collapse: onVagonClassesCollapse,
        complete: onVagonClassesComplete,
        expand: onVagonClassesExpand
    });

    $('#VagonSeryClasses').kendoExpansionPanel({
        title: 'Серии вагонов',
        expanded: false,
        collapse: onVagonSeryClassesCollapse,
        complete: onVagonSeryClassesComplete,
        expand: onVagonSeryClassesExpand
    });
    
    $('#VagonModels').kendoExpansionPanel({
        title: 'Модели вагонов',
        expanded: false,
        collapse: onVagonModelsCollapse,
        complete: onVagonModelsComplete,
        expand: onVagonModelsExpand
    });


    $('#VagonTypes').kendoExpansionPanel({
        title: 'Типы вагонов',
        expanded: false,
        collapse: onVagonTypesCollapse,
        complete: onVagonTypesComplete,
        expand: onVagonTypesExpand
    });
</script>
